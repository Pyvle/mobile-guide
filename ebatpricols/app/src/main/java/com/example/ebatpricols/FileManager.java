package com.example.ebatpricols;

import android.content.Context;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;

public class FileManager {
    private Context context;

    public FileManager(Context context){
        this.context = context;
    }

    // Проверка существования файла и его пустоты
    public boolean isFileValid(String fileName) {
        File file = context.getFileStreamPath(fileName);
        if(!file.exists())
            return false;

        try (FileInputStream fis = context.openFileInput(fileName)) {
            return fis.available() > 0; // Возвращает true, если файл не пустой
        } catch (IOException e) {
            e.printStackTrace();
            return false; // Если произошла ошибка, считаем файл недействительным
        }
    }

    // Чтение данных из файла
    public ArrayList<String[]> readDataFromFile(String fileName) {
        ArrayList<String[]> items = new ArrayList<>();

        try (FileInputStream fis = context.openFileInput(fileName);
            BufferedReader reader =  new BufferedReader(new InputStreamReader(fis))) {

                String line;
                while((line = reader.readLine()) != null) {
                    String[] parts = line.split(":");
                    items.add(parts);
                }
        } catch (IOException e) {
            e.printStackTrace();
        }
        return items;
    }

    // Добавление записи в файл
<<<<<<< HEAD
    public void addRecordToFile(String fileName, String[] record) {
        try (FileOutputStream fos = context.openFileOutput(fileName, Context.MODE_APPEND)) {
            fos.write((record[0] + ":" + record[1] + ":" + record[2] + ":" + record[3] + ":" + record[4] + "\n").getBytes()); // Запись новой строки
=======
    public void addRecordToFile(String fileName, String record) {
        try (FileOutputStream fos = context.openFileOutput(fileName, Context.MODE_APPEND)) {
            fos.write((record + "\n").getBytes()); // Запись новой строки
>>>>>>> origin/main
        } catch (IOException e) {
            e.printStackTrace();
        }
    }


    public void writeDataToFile(String fileName) {
        String data = "Завод \"Экогаз\":Промышленный объект:55.7558,37.6173:Загрязнение воздуха (CO2,SO2):Датчики\n" +
                "Парк \"Зелёная роща\":Природный объект:54.9876,38.1234:Загрязнение почвы,уровень радиации:Лабораторный анализ\n" +
                "Река \"Клязьма\":Природный водный объект:55.4312,38.6543:Загрязнение воды (химические и биологические параметры):Пробы воды,лабораторный анализ\n" +
                "Трасса \"М-7\":Транспортная инфраструктура:55.8765,37.8765:Уровень шума,загрязнение воздуха:Шумомеры,анализ воздуха\n" +
                "Промзона \"Западная\":Промышленный объект:56.4321,37.1234:Загрязнение почвы и воды:Пробы воды и почвы\n" +
                "Лес \"Сосновый бор\":Природный объект:57.3210,39.3210:Загрязнение почвы,радиационный фон:Лабораторный анализ,радиометры\n" +
                "Завод \"АвтоТех\":Промышленный объект:55.3421,37.2234:Загрязнение воздуха (CO2,NO2):Датчики\n" +
                "Озеро \"Святое\":Природный водный объект:54.6543,38.4321:Загрязнение воды (бактериологические исследования):Пробы воды,лабораторный анализ\n" +
                "Трасса \"Кольцевая\":Транспортная инфраструктура:55.9987,37.1122:Уровень вибрации,загрязнение воздуха:Виброметры,анализ воздуха\n" +
                "Парк \"Городской сад\":Природный объект:56.9876,37.9876:Загрязнение почвы,уровень радиации:Лабораторный анализ\n" +
                "Завод \"СтальПро\":Промышленный объект:55.5432,37.6543:Загрязнение воздуха (SO2,CO2):Датчики\n" +
                "Река \"Москва\":Природный водный объект:55.7210,37.6199:Загрязнение воды (химические и физические параметры):Пробы воды,лабораторный анализ\n" +
                "Автомагистраль \"Север\":Транспортная инфраструктура:56.1123,37.5432:Уровень шума,загрязнение воздуха:Шумомеры,анализ качества воздуха\n" +
                "Парк \"Патриот\":Природный объект:56.8765,38.1234:Загрязнение почвы,уровень радиации:Лабораторный анализ\n" +
                "Промзона \"Южная\":Промышленный объект:55.1234,37.5432:Загрязнение почвы и воздуха:Пробы почвы,анализ воздуха\n" +
                "Завод \"ЭнергоМаш\":Промышленный объект:55.3210,37.8765:Загрязнение воздуха (SO2,NO2):Датчики\n" +
                "Озеро \"Ладожское\":Природный водный объект:59.1234,31.5432:Загрязнение воды (биологические исследования):Пробы воды,лабораторный анализ\n" +
                "Трасса \"Южная магистраль\":Транспортная инфраструктура:55.7654,37.9876:Уровень шума,загрязнение воздуха:Шумомеры,анализ воздуха\n" +
                "Парк \"Малиновка\":Природный объект:56.4321,38.8765:Загрязнение почвы,уровень радиации:Лабораторный анализ\n" +
                "Промзона \"Северная\":Промышленный объект:55.4321,37.8765:Загрязнение почвы,воды и воздуха:Пробы,датчики\n" +
                "Завод \"ТехПром\":Промышленный объект:55.7654,37.6543:Загрязнение воздуха (NO2,CO):Датчики\n" +
                "Озеро \"Красное\":Природный водный объект:54.8765,38.5432:Загрязнение воды (химические вещества):Пробы воды,лабораторный анализ\n" +
                "Трасса \"М-9\":Транспортная инфраструктура:55.4321,37.7654:Уровень шума,загрязнение воздуха:Шумомеры,датчики качества воздуха\n" +
                "Лесопарк \"Синичкино\":Природный объект:56.8765,38.5432:Загрязнение почвы,радиационный фон:Лабораторный анализ\n" +
                "Промзона \"Московская\":Промышленный объект:55.5432,37.4321:Загрязнение почвы и воды:Пробы воды и почвы\n" +
                "Завод \"НефтеГаз\":Промышленный объект:55.8765,37.5432:Загрязнение воздуха (CO2,SO2):Датчики\n" +
                "Река \"Ока\":Природный водный объект:55.6543,37.7654:Загрязнение воды (химические и биологические параметры):Пробы воды,лабораторный анализ\n" +
                "Автомагистраль \"М-8\":Транспортная инфраструктура:55.8765,37.4321:Уровень вибрации,загрязнение воздуха:Виброметры,анализ воздуха\n" +
                "Парк \"Зеленый угол\":Природный объект:56.8765,38.4321:Загрязнение почвы,уровень радиации:Лабораторный анализ\n" +
                "Завод \"МеталПром\":Промышленный объект:55.7654,37.8765:Загрязнение воздуха (CO,NO2):Датчики\n" +
                "Озеро \"Голубое\":Природный водный объект:54.6543,38.1234:Загрязнение воды (органические вещества):Пробы воды,лабораторный анализ\n" +
                "Трасса \"Восточная\":Транспортная инфраструктура:55.3210,37.8765:Уровень шума,вибрации:Шумомеры,виброметры\n" +
                "Завод \"ХимТех\":Промышленный объект:55.5432,37.4321:Загрязнение воздуха (SO2,NO2):Датчики\n" +
                "Парк \"Центральный\":Природный объект:56.4321,38.6543:Загрязнение почвы,радиационный фон:Лабораторный анализ\n" +
                "Автомагистраль \"Южная\":Транспортная инфраструктура:55.6543,37.9876:Уровень шума,загрязнение воздуха:Шумомеры,анализ воздуха\n" +
                "Завод \"ЭкоТех\":Промышленный объект:55.7654,37.5432:Загрязнение воздуха (CO2,NO):Датчики\n" +
                "Озеро \"Лебединое\":Природный водный объект:54.8765,38.8765:Загрязнение воды (бактериологические исследования):Пробы воды,лабораторный анализ\n" +
                "Трасса \"М-4\":Транспортная инфраструктура:55.1234,37.6543:Уровень шума,вибрации:Шумомеры,виброметры\n" +
                "Промзона \"Восточная\":Промышленный объект:55.6543,37.8765:Загрязнение почвы и воды:Пробы воды и почвы\n" +
                "Завод \"СтройПром\":Промышленный объект:55.8765,37.5432:Загрязнение воздуха (CO,SO2):Датчики\n" +
                "Река \"Дон\":Природный водный объект:55.5432,38.4321:Загрязнение воды (химические и биологические параметры):Пробы воды,лабораторный анализ\n" +
                "Автомагистраль \"Крымская\":Транспортная инфраструктура:55.4321,37.7654:Уровень шума,вибрации:Шумомеры,виброметры\n" +
                "Лесопарк \"Воробьевы горы\":Природный объект:56.6543,37.9876:Загрязнение почвы,уровень радиации:Лабораторный анализ\n" +
                "Завод \"НефтеХим\":Промышленный объект:55.7654,37.5432:Загрязнение воздуха (NO,SO2):Датчики\n" +
                "Озеро \"Чистое\":Природный водный объект:54.8765,38.4321:Загрязнение воды (биологические исследования):Пробы воды,лабораторный анализ\n" +
                "Трасса \"Северная\":Транспортная инфраструктура:55.9876,37.5432:Уровень шума,загрязнение воздуха:Шумомеры,анализ воздуха\n" +
                "Промзона \"Западная\":Промышленный объект:55.7654,37.8765:Загрязнение почвы и воды:Пробы воды и почвы\n" +
                "Завод \"ТяжМаш\":Промышленный объект:55.5432,37.4321:Загрязнение воздуха (CO2,NO2):Датчики\n" +
                "Река \"Волга\":Природный водный объект:55.4321,38.1234:Загрязнение воды (химические вещества):Пробы воды,лабораторный анализ\n" +
                "Автомагистраль \"Западная\":Транспортная инфраструктура:55.8765,37.8765:Уровень шума,вибрации:Шумомеры,виброметры\n" +
                "Парк \"Новый мир\":Природный объект:56.5432,37.6543:Загрязнение почвы,уровень радиации:Лабораторный анализ\n" +
                "Завод \"АгроТех\":Промышленный объект:55.9876,37.4321:Загрязнение воздуха (NO,CO2):Датчики\n" +
                "Озеро \"Светлое\":Природный водный объект:54.7654,38.5432:Загрязнение воды (бактериологические исследования):Пробы воды,лабораторный анализ\n" +
                "Трасса \"Солнечная\":Транспортная инфраструктура:55.8765,37.6543:Уровень вибрации,загрязнение воздуха:Виброметры,анализ воздуха\n" +
                "Лес \"Малиновый лес\":Природный объект:56.9876,38.7654:Загрязнение почвы,уровень радиации:Лабораторный анализ\n" +
                "Завод \"ТехСнаб\":Промышленный объект:55.6543,37.8765:Загрязнение воздуха (CO,NO2):Датчики\n" +
                "Река \"Яуза\":Природный водный объект:55.5432,38.6543:Загрязнение воды (химические вещества):Пробы воды,лабораторный анализ\n" +
                "Автомагистраль \"М-11\":Транспортная инфраструктура:55.9876,37.8765:Уровень шума,вибрации:Шумомеры,виброметры\n" +
                "Промзона \"Северная\":Промышленный объект:55.6543,37.6543:Загрязнение почвы и воды:Пробы воды и почвы\n" +
                "Завод \"МеталПром\":Промышленный объект:55.9876,37.4321:Загрязнение воздуха (CO,NO):Датчики\n" +
                "Озеро \"Белое\":Природный водный объект:54.8765,38.8765:Загрязнение воды (химические и биологические параметры):Пробы воды,лабораторный анализ\n" +
                "Трасса \"Южная\":Транспортная инфраструктура:55.6543,37.5432:Уровень шума,вибрации:Шумомеры,виброметры\n";

        try (FileOutputStream fos = context.openFileOutput(fileName, Context.MODE_PRIVATE)) {
            fos.write(data.getBytes());
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
